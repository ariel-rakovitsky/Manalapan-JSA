<html>
	<head>
		<title>Manalapan JSA</title>
		<link rel="shortcut icon" href="icon.ico" />
		<link rel="stylesheet" type="text/css" href="standard.css">
		<script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.4.2.min.js"></script>
		<script>
			function validate(){
				var name = document.getElementById("name").value;
				var email = document.getElementById("email").value.toLowerCase();
				var gradYear = document.getElementById("grad").value;
				var password = document.getElementById("passw").value.toLowerCase();
				var confirm = document.getElementById("confirm").value.toLowerCase();

				var array = [name, "name", email, "email adress", password, "password", confirm, "confirm password"];
				for(i = 0; i<7; i+=2){
					if(array[i].trim()==""){
						alert("Please insert a value for " +array[i+1]);
						return;
					}
				}
				if(!(email.includes("a"))||!(email.includes("."))){
					alert("Please enter a valid email");
					return;
				}
				if(password!=confirm){
					alert("Passwords do not match");
					return;
				}
				
				Parse.initialize("5ZjkcrMrZAuvGx70yRJcQ8swS2L1GBuMp39Ro1FO", "Qj2XWfGH0LpxCzIKUvtMn2Z2W7UGg6WmWN72GahF");
				var user = new Parse.User();
				user.set("username", email);
				user.set("password", password);
				user.set("gradYear", gradYear);
				user.set("email", email);
				user.set("name", name);
				user.set("trusted", true);

				user.signUp(null, {
  					success: function(user) {
  						alert("An email-verification has been sent to your email.");
   						window.location.assign("index.html");
  					},
  				error: function(user, error) {
   						// Show the error message somewhere and let the user try again.
    					alert("Error: "+ error.message);
  					}
				});
			}  
		</script>
	</head>
	
	<body>
		<object style="width:100%; height:180; overflow:hidden; position:relative" data="default.html"></object>
		<br/>
  		<center>
  			<table style='width:25%; background-color:#8C2424;' border='0'>
  				<tr>
  					<td colspan = '2'>
  						<center><H2 style='color:white; padding-top:15; padding-bottom:0'>Sign Up</H2></center>
  					</td>
  				</tr>
  				<tr>
  					<td style='text-align:right; width:45%; height:35'>
  						<a style='color:white'>Name:</a>
  					</td>
  					<td>
  						<input type="text" id="name">
  					</td>
  				</tr>
  				<tr>
  					<td style='text-align:right; width:45%; height:35'>
  						<a style='color:white'>Email:</a>
  					</td>
  					<td>
  						<input type="text" id="email">
  					</td>
  				</tr>
  				<tr>
  					<td style='text-align:right; width:45%; height:35'>
  						<a style='color:white'>Graduation Year (optional):</a>
  					</td>
  					<td>
  						<input type="text" id="grad">
  					</td>
  				</tr>
  				<tr>
  					<td style='text-align:right; width:45%; height:35'>
  						<a style='color:white'>Password:</a>
  					</td>
  					<td>
  						<input type="password" id="passw">
  					</td>
  				</tr>
  				<tr>
  					<td style='text-align:right; width:45%; height:35'>
  						<a style='color:white'>Confirm Password:</a>
  					</td>
  					<td>
  						<input type="password" id="confirm">
  					</td>
  				</tr>
  				<tr>
  					<td colspan='2'>
  						<center style='padding-bottom:15; padding-top:15'><button id="submit" onclick='validate()'>Sign Up</button></center>
  					</td>
  				</tr>
  			</table>
  		</center>
	</body>
</html>